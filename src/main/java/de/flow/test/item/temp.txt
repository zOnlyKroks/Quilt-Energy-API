private static boolean canMergeItems(ItemStack first, ItemStack second) {
    if (!first.isOf(second.getItem())) {
        return false;
    } else if (first.getDamage() != second.getDamage()) {
        return false;
    } else if (first.getCount() > first.getMaxCount()) {
        return false;
    } else {
        return ItemStack.areNbtEqual(first, second);
    }
}
